<%@page import="java.time.LocalDate"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>

<%@ taglib prefix="sec"
	uri="http://www.springframework.org/security/tags"%>
<script type="text/javascript" src="/resources/js/jquery.min.js"></script>

<script>

	$(()=>{
		
		
			window.onload = function() {
		        // 기존 데이터를 가져와서 변수에 저장
		        var existingData = "내용을 입력해주세요";
	
		        // 가져온 데이터를 <textarea> 요소에 설정
		        document.getElementById("noticeBrdCn").value = existingData;
		    };
		
		
		
		
		
		
		
		
		 $('.ck-blurred').keydown(function(){
		        console.log("str : " + window.editor.getData());
		        $("#noticeBrdCn").val(window.editor.getData());
		    });
		    
		    $('.ck-blurred').on("focusout", function(){
		        $("#noticeBrdCn").val(window.editor.getData());
		    });
		 
		
		   
		    
		
		
		
		
		
		
		
	});




</script>




<!DOCTYPE html>
<html>
<body>
	<div class="wf-main-container">
		<!-- =============== body 시작 =============== -->
		<!-- =============== 상단타이틀영역 시작 =============== -->
		<form
			action="/notice/creatNotice?${_csrf.parameterName}=${_csrf.token}"
			method="post" enctype="multipart/form-data">
			<div class="wf-tit-wrap">
				<h1 class="page-tit">공지 게시판 등록</h1>
				<div class="wf-util">
					<button type="button" class="btn1" onclick="location.href='http://localhost/notice/list'">취소</button>
					<button type="submit" id="submitBtn" class="btn2">등록</button>
				</div>
			</div>
			<!-- =============== 상단타이틀영역 끝 =============== -->
			<!-- =============== 컨텐츠 영역 시작 =============== -->
			<div class="wf-content-wrap">

				<div class="wf-content-area">
					
					<!-- 등록폼 시작 -->
					<ul class="wf-insert-form3">
						<li>
						<input type="hidden" id="empNo" name="empNo" value="<%=session.getAttribute("empNo")%>">
							<div class="wf-insert-tit">
								<div class="wf-select-group">
									<select name="noticeBrdSeCd" id="noticeBrdSeCd" required>
										<option value="1">일반</option>
										<option value="2">인사</option>
									</select>
								</div>
								<input type="text" name="noticeBrdSj" placeholder="제목을 입력해주세요">
								<input type="date" name="fixingEndDate" id="fixingEndDate"  min="<%= LocalDate.now() %>">
							</div>
						</li>
						<li>
							<div id="ckExam"></div> <textarea name="noticeBrdCn"
								id="noticeBrdCn" placeholder="내용을 입력해주세요."
								style="display:none; " ></textarea>
						</li>
						<li><input type="file" name="uploadfile" id="uploadfile"
							multiple></li>
					</ul>
		</form>
		<!-- 등록폼 끝 -->
	</div>
	</div>
	<!-- =============== 컨텐츠 영역 끝 =============== -->
	<!-- =============== body 끝 =============== -->
	</div>

</body>
</html>
<script type="text/javascript">
				ClassicEditor
				.create( document.querySelector('#ckExam'),{ckfinder:{uploadUrl:'/upload/uploads?${_csrf.parameterName}=${_csrf.token}'}})
				 .then(editor=>{window.editor=editor;})
				 .catch(err=>{console.error(err.stack);});
		</script>
<script type="text/javascript">
				window.editor.setData("내용을 입력해주세요");
		</script>