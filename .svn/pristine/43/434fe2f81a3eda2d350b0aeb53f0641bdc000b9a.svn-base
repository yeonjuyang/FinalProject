<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>


     		    <!-- =============== 상단타이틀영역 시작 =============== -->
                    <div class="wf-tit-wrap">
                        <h1 class="page-tit">예시) 공지사항</h1>
                        <div class="side-util">
                            <button type="button" class="btn2">등록</button>
                        </div>
                    </div>
                    <!-- =============== 상단타이틀영역 끝 =============== -->
                    <!-- =============== 컨텐츠 영역 시작 =============== -->
                    <div class="wf-content-wrap">
					    <div class="wf-content-area">
                            <table class="wf-table">
                                <colgroup>
                                    <col style="width: 100%;">
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th>제목</th>
                                    </tr>
                                </thead>
                                <tbody	id="1111">                              
                                </tbody>
                            </table>
                        </div>

                        <!-- 페이지네이션 시작 -->
                     	<div id="pagination"></div>
                        <!-- 페이지네이션 끝 -->

                        <!-- 검색영역 시작 -->
                        <div class="wf-search-area">
                            <div class="select-box">
                                <select name="" id="">
                                    <option value="">제목</option>
                                    <option value="">제목+내용</option>
                                    <option value="">작성자</option>
                                </select>
                            </div>
                            <input type="text" placeholder="검색할 내용을 입력해주세요">
                            <button type="button" class="btn4">
                                <i class="xi-search"></i>
                            </button>
                        </div>
                        <!-- 검색영역 끝 -->
 
   
                    </div>
                    
                    
 <script>
$(()=>{
	readBucket(1);
	
	$(document).on("click",".pagination .page-link",function(){
		event.stopPropagation();
		let currentPage=$(this).text();
		
		//console.log("currentPage this",this);
		//console.log("currentPage pageLink"+currentPage);
		readBucket(currentPage);
	});
	
	
	$(document).on("click",".detail",function(){
		let param= $(this).text();
		console.log("디테일"+param);
		downloadFile(param);
	}); 
	
	
});






//리스트 뽑아주는 함수
function readBucket(currentPage){
	
    $.ajax({
        url:"/s3/bucket/img",
        //data:JSON.stringify(data),
        contentType:"application/json;charset=utf-8",
        type:"get",
        dataType:"json",
        beforeSend:function(xhr){
            xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
        },
        success:function(res) { 
			console.log(res);
			$("#1111").html('');
			let str='';
			console.log(res.fileNames.length);
			let length =res.fileNames.length;
			res.fileNames.slice((currentPage*10)- (10-1),currentPage*10).forEach(function(vo) {
				str+="<tr>";
				str+="<td><p class='detail'>"+vo+"</p></td>";
				str+="</tr>";
			});
			$("#1111").html(str);
			
			let page='';
            page+=`<nav class="wf-pagination-wrap">
            <ul class="pagination"> `;
			
            	for(let i=1; i<(length/10)+1; i++){
               page+=`<li class="page-item pagination" value='\${i}'>
                    <a class="page-link" href="#">\${i}</a>
                </li>`;
              
            	}
           page+=` </ul>
        		</nav>`;
			$("#pagination").html(page);
			$(".page-item").filter(function() {
			    return $('.page-link',this).text().trim() == currentPage;
			}).addClass("active");
			
			
        }
	});
}//리스트 뽑아주는 함수 끝




</script>                       
                        
                        
                                        