<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team1.workforest.admin.mapper.AdminEmpMapper">
	
	<select id="getAgeGraph" parameterType="hashMap" resultType="int">
		SELECT COUNT(EMP_NO)
		FROM EMPLOYEE
		WHERE #{year} >= SUBSTR(ECNY_DATE,1,4)
		AND WORK_SE_CD != 3 AND WORK_SE_CD != 4
		AND (SYSDATE - TO_DATE(BDATE,'YYYYMMDD'))/365 > #{start}
		AND #{end} >= (SYSDATE - TO_DATE(BDATE,'YYYYMMDD'))/365
	</select>
	
	<select id="getAvgAge" parameterType="hashMap" resultType="int">
		SELECT ROUND(AVG((SYSDATE - TO_DATE(BDATE,'yyyymmdd'))/365),0)
		FROM EMPLOYEE
	</select>
	
	<select id="getEmpCount" parameterType="hashMap" resultType="int">
		SELECT COUNT(EMP_NO)
		FROM EMPLOYEE
		WHERE WORK_SE_CD != 3 AND WORK_SE_CD != 4
	</select>
	
	<select id="getGenderRate" parameterType="hashMap" resultType="int">
		SELECT COUNT(EMP_NO)
		FROM EMPLOYEE
		WHERE WORK_SE_CD != 3 AND WORK_SE_CD != 4
		AND GENDER = #{gender}
	</select>
	
	<select id="getRetireCount" parameterType="hashMap" resultType="int">
		SELECT COUNT(EMP_NO)
		FROM EMPLOYEE
		WHERE WORK_SE_CD = #{retire}
	</select>
	
</mapper>