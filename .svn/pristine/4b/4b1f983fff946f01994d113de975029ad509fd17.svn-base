<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.team1.workforest.menu.mapper.MenuMapper">
	
	
	<select id="selectMenu" resultType="menuVO">
		SELECT 
            MENU_NO
          , MENU_NM
          , VALID_YN_CD
          , PAGE_URL
          , UPPER_MENU
          , MENU_ICON
      	FROM
          	MENU		
	</select>
            

	<select id="findGlance" parameterType="menuVO" resultType="glanceVO">
		SELECT
			  GLAN_NO
			, USER_SETUP_NO
			, MENU_NO
			, GLAN_NM
		FROM
			GLANCE
		WHERE
			1=1
		AND GLAN_NM=#{glanNm}
		AND USER_SETUP_NO=#{empNo}		
	</select>
	
	<delete id="deleteGlance" parameterType="menuVO">
		DELETE 
		FROM
			GLANCE
		WHERE
			1=1
		AND GLAN_NM=#{glanNm}
		AND USER_SETUP_NO=#{empNo}	
	</delete>

	<insert id="insertGlance" parameterType="menuVO">
		INSERT INTO 
			GLANCE(
			  GLAN_NO
			, USER_SETUP_NO
			, MENU_NO
			, GLAN_NM
			)
		VALUES(
			 SEQ_GLANCE.NEXTVAL
			,#{empNo}
			,#{menuNo}
			,#{glanNm}
		)	
	</insert>
	
	
	<select id="selectGlance" parameterType="menuVO" resultType="menuVO">
		SELECT
			  A.GLAN_NO
			, A.USER_SETUP_NO AS EMP_NO
			, A.MENU_NO
			, A.GLAN_NM
			, B.MENU_NO
			, B.MENU_NM
			, B.PAGE_URL			
			, B.MENU_ICON
		FROM
		 	GLANCE A, MENU B
		WHERE
			1=1 
		AND	A.USER_SETUP_NO=#{empNo}
		AND A.MENU_NO=B.MENU_NO
		AND GLAN_NM=#{glanNm}						
	</select>
	
</mapper>